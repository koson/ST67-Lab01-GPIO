# ESP32 GPIO

![alt text](./Images/image07.png)

## ESP-IDF GPIO APIs

แนวทางการใช้งาน (API) ของ ESP32 GPIO ปรากฏรายละเอียดอยู่ในไฟล์ gpio.h ซึ่งช่วยให้ผู้ใช้สามารถหนดและควบคุมการทำงานขาสัญญาณอินพุตและเอาต์พุตแบบดิจิทัลของ ESP32 ได้

งานพื้นฐานของ GPIO ได้แก่ การกำหนดค่าต่าง ๆ ให้แก่ I/O ports ประกอบด้วย

1) การกำหนดทิศทางของพอร์ตให้เป็น input หรือ output
2) ในโหมดเอาต์พุต ทำหน้าที่เซ็ตค่า (setting) และเคลียร์ค่า (clearing) ให้กับ output port ซึ่งจะทำให้เอาต์พุตพอร์ตมีสถานะ ON หรือ OFF  
3) ในโหมดอินพุต ทำหน้าที่อ่าน digital input port

### 1.การกำหนดทิศทางของพอร์ต

การกำหนดทิศทางของพอร์ตให้เป็นอินพุตหรือเอาต์พุต ทำได้โดยการใช้ฟังก์ชัน `gpio_set_direction()`  และส่งพารามิเตอร์ตัวแรกเป็นหมายเลขพอร์ต (ชนิด `gpio_num_t`) พารามิเตอร์ตัวที่สองคือทิศทาง (`GPIO_MODE_OUTPUT`)

#### ตัวอย่างการกำหนดทิศทางของพอร์ต 

```c
gpio_set_direction(GPIO_NUM_0, GPIO_MODE_OUTPUT);
```

### 2.การกำหนดระดับเอาต์พุตของพอร์ต

เมื่อต้องการตั้งค่าพอร์ตเอาท์พุต GPIO ให้มีค่าเป็น High หรือ Low จะต้องใช้ฟังก์ชัน `gpio_set_level()` ซึ่งฟังก์ชันนี้ยอมรับพารามิเตอร์สองตัว ประกอบด้วย  

- พารามิเตอร์แรกคือหมายเลขพอร์ต 

- พารามิเตอร์ที่สองคือระดับสัญญาณเอาต์พุต 

ถ้าต้องการให้ขาพอร์ตอยู่ในระดับ High ต้องส่งค่า 1 ถ้าต้องการให้ ขาพอร์ตอยู่ในระดับ Low   ต้องส่งค่า 0  

#### ตัวอย่างการกำหนดระดับเอาต์พุตของพอร์ต 

``` c
gpio_set_level(GPIO_NUM_0, 1);
```

### 3.Read Input Pin

เมื่อต้องการให้พอร์ตทำงานเป็นอินพุต ก็ต้องใช้ฟังก์ชันกำหนดทิศทางพอร์ต  `gpio_set_direction()` ด้วย แต่ต้องป้อนพารามิเตอร์ตัวที่สอง ให้มีทิศทางเป็น `GPIO_MODE_INPUT` เป็น  `gpio_set_direction(GPIO_NUM_1, GPIO_MODE_INPUT);`

การอ่านค่าระดับสัญญาณจากพอร์ต ใช้ฟังก์ชัน `gpio_get_level()` โดยต้องกำหนดพารามิเตอร์ของฟังก์ชันเป็นหมายเบขพอร์ตที่ต้องการอ่านค่า ซึ่งฟังก์ชันนี้ส่งค่ากลับมาเป็นระดับ high หรือ Low

#### ตัวอย่างการอ่านระดับอินพุตของพอร์ต

```c
int gpio_get_level(GPIO_NUM_1);
```
